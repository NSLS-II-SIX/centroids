<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Initial Pass Through Image &#8212; centroids v0.1.9-11-g67ed1ea documentation</title>
    <link rel="stylesheet" href="_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="_static/graphviz.css" />
    <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/language_data.js"></script>
    <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Second Pass Through Photons" href="second_pass.html" />
    <link rel="prev" title="Theory of Operation" href="theory.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">
<script type="text/javascript" src="_static/js/jquery-1.11.0.min.js "></script>
<script type="text/javascript" src="_static/js/jquery-fix.js "></script>
<script type="text/javascript" src="_static/bootstrap-3.3.7/js/bootstrap.min.js "></script>
<script type="text/javascript" src="_static/bootstrap-sphinx.js "></script>

  </head><body>

  <div id="navbar" class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="index.html">
          centroids</a>
        <span class="navbar-text navbar-version pull-left"><b>v0.1.9-11</b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="index.html">Site <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="theory.html">Theory of Operation</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="theory.html#contents">Contents</a><ul class="current">
<li class="toctree-l3 current"><a class="current reference internal" href="#">Initial Pass Through Image</a></li>
<li class="toctree-l3"><a class="reference internal" href="second_pass.html">Second Pass Through Photons</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="theory.html#introduction">Introduction</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="api.html">Centroids API</a><ul>
<li class="toctree-l2"><a class="reference internal" href="api.html#python-api">Python API</a></li>
<li class="toctree-l2"><a class="reference internal" href="api.html#initialization-functions">Initialization Functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="api.html#data-processing-functions">Data Processing Functions</a></li>
</ul>
</li>
</ul>
</ul>
</li>
              
                <li class="dropdown">
  <a role="button"
     id="dLabelLocalToc"
     data-toggle="dropdown"
     data-target="#"
     href="#">Page <b class="caret"></b></a>
  <ul class="dropdown-menu localtoc"
      role="menu"
      aria-labelledby="dLabelLocalToc"><ul>
<li><a class="reference internal" href="#">Initial Pass Through Image</a></li>
</ul>
</ul>
</li>
              
            
            
              
                
  <li>
    <a href="theory.html" title="Previous Chapter: Theory of Operation"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; Theory of Operation</span>
    </a>
  </li>
  <li>
    <a href="second_pass.html" title="Next Chapter: Second Pass Through Photons"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">Second Pass T... &raquo;</span>
    </a>
  </li>
              
            
            
            
            
              <li class="hidden-sm">
<div id="sourcelink">
  <a href="_sources/first_pass.rst.txt"
     rel="nofollow">Source</a>
</div></li>
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="body col-md-12 content" role="main">
      
  <div class="section" id="initial-pass-through-image">
<h1>Initial Pass Through Image<a class="headerlink" href="#initial-pass-through-image" title="Permalink to this headline">¶</a></h1>
<p>For each pixel above threshold the code looks to see if this is the highest
making a first pass. in the box (n x n) surrounding the pixel. If this is
the highest in the box, then the location is stored in a list of potential
photons.</p>
<p>In addition to storing the location of potential photons, an image is formed
with its value incremented by one for the box (n x n) around the pixel. This
image initially starts with all values set to zero. After the images have
been processed, this image can be used to find overlap between photon events.
An example of such an image is shown in <a class="reference internal" href="#first-pass-image"><span class="std std-ref">First pass image output</span></a></p>
<p>A graphical (flow chart) representation of the logic is shown in
<a class="reference internal" href="#first-pass-digraph"><span class="std std-ref">First pass through all images</span></a>.</p>
<div class="figure align-default" id="id1">
<span id="first-pass-image"></span><img alt="_images/first_pass.png" src="_images/first_pass.png" />
<p class="caption"><span class="caption-text">First pass image output</span><a class="headerlink" href="#id1" title="Permalink to this image">¶</a></p>
<div class="legend">
<p>(top) Actual CCD image showing photon events.
(bottom) Image output from first pass showing potential photon locations</p>
</div>
</div>
<div class="figure align-default" id="id2">
<span id="first-pass-digraph"></span><div class="graphviz"><img src="_images/graphviz-036db7a0dfc39d1f86f20e8e493264593b7b8c29.png" alt="digraph first_pass {
node[shape=&quot;box&quot;, style=rounded]
   start; end;
node[shape=&quot;diamond&quot;, style=&quot;&quot;]
   is_last_pixel[label=&quot;is last pixel?&quot;]
   is_pixel_above_thresh[label=&quot;is pixel above\nthreshold&quot;]
   is_pixel_highest[label=&quot;is pixel highest\nvalue in nxn box&quot;]
node[shape=&quot;parallelogram&quot;, style=&quot;&quot;]
   get_pixel[label=&quot;get pixel value&quot;]
node[shape=&quot;box&quot;, style=&quot;&quot;]
   set_start_pixel[label=&quot;move to first pixel&quot;]
   move_to_next_pixel[label=&quot;move to next pixel&quot;]
   store_loc[label=&quot;add location of\nphoton to photon list&quot;]
   mark_loc[label=&quot;mark location\nof nxn box in image&quot;]


start -&gt; set_start_pixel
set_start_pixel -&gt; get_pixel
get_pixel -&gt; is_pixel_above_thresh

is_pixel_above_thresh -&gt; is_last_pixel[label=&quot;no&quot;]
is_pixel_above_thresh -&gt; is_pixel_highest[label=&quot;yes&quot;]

is_pixel_highest -&gt; is_last_pixel[label=&quot;no&quot;]
is_pixel_highest -&gt; store_loc[label=&quot;yes&quot;]
store_loc -&gt; mark_loc
mark_loc -&gt; is_last_pixel

move_to_next_pixel -&gt; get_pixel
is_last_pixel -&gt; move_to_next_pixel[label=&quot;no&quot;]
is_last_pixel -&gt; end[label=&quot;yes&quot;]
}" class="graphviz" /></div>
<p class="caption"><span class="caption-text">First pass through all images</span><a class="headerlink" href="#id2" title="Permalink to this image">¶</a></p>
</div>
</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright 2019, Stuart B. Wilkins.<br/>
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 3.1.0.<br/>
    </p>
  </div>
</footer>
  </body>
</html>